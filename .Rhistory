'Retrieve_Wiper_SN-1' = 'Wiper_SN-1.y',
'Retrieve_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.y',
'Retrieve_miniDOT_Location-1' = 'miniDOT_Location-1.y',
'Retrieve_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.y',
'Retrieve_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.y',
'Retrieve_miniDOT_SN-2' = 'miniDOT_SN-2.y',
'Retrieve_Wiper_SN-2' = 'Wiper_SN-2.y',
'Retrieve_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.y',
'Retrieve_miniDOT_Location-2' = 'miniDOT_Location-2.y',
'Retrieve_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.y',
'Retrieve_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.y',
Retrieve_Notes.y,
Retrieve_BaroTROLL_SN.y,
)
deploy_retrieve <- deploy %>%
left_join(retrieve, by = 'Site_ID') %>%
rename(
Deploy_Date = Date.x,
Deploy_Start_Time = Start_Time.x,
Deploy_End_Time = End_Time.x,
Deploy_Water_Depth_cm = Water_Depth_cm.x,
Deploy_Field_Crew = Field_Crew.x,
'Deploy_miniDOT_SN-1' = 'miniDOT_SN-1.x',
'Deploy_Wiper_SN-1' = 'Wiper_SN-1.x',
'Deploy_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.x',
'Deploy_miniDOT_Location-1' = 'miniDOT_Location-1.x',
'Deploy_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.x',
'Deploy_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.x',
'Deploy_miniDOT_SN-2' = 'miniDOT_SN-2.x',
'Deploy_Wiper_SN-2' = 'Wiper_SN-2.x',
'Deploy_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.x',
'Deploy_miniDOT_Location-2' = 'miniDOT_Location-2.x',
'Deploy_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.x',
'Deploy_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.x',
Deploy_Notes.x = Notes.x,
Deploy_BaroTROLL_SN.x = BaroTROLL_SN.x,
Retrieve_Date = Date.y,
Retrieve_Start_Time = Start_Time.y,
Retrieve_End_Time = End_Time.y,
Retrieve_Water_Depth_cm = Water_Depth_cm.y,
Retrieve_Field_Crew = Field_Crew.y,
'Retrieve_miniDOT_SN-1' = 'miniDOT_SN-1.y',
'Retrieve_Wiper_SN-1' = 'Wiper_SN-1.y',
'Retrieve_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.y',
'Retrieve_miniDOT_Location-1' = 'miniDOT_Location-1.y',
'Retrieve_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.y',
'Retrieve_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.y',
'Retrieve_miniDOT_SN-2' = 'miniDOT_SN-2.y',
'Retrieve_Wiper_SN-2' = 'Wiper_SN-2.y',
'Retrieve_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.y',
'Retrieve_miniDOT_Location-2' = 'miniDOT_Location-2.y',
'Retrieve_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.y',
'Retrieve_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.y',
Retrieve_Notes.y = Notes.y,
Retrieve_BaroTROLL_SN.y = BaroTROLL_SN.y,
)
View(deploy_retrieve)
deploy_retrieve <- deploy %>%
full_join(retrieve, by = 'Site_ID') %>%
rename(
Deploy_Date = Date.x,
Deploy_Start_Time = Start_Time.x,
Deploy_End_Time = End_Time.x,
Deploy_Water_Depth_cm = Water_Depth_cm.x,
Deploy_Field_Crew = Field_Crew.x,
'Deploy_miniDOT_SN-1' = 'miniDOT_SN-1.x',
'Deploy_Wiper_SN-1' = 'Wiper_SN-1.x',
'Deploy_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.x',
'Deploy_miniDOT_Location-1' = 'miniDOT_Location-1.x',
'Deploy_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.x',
'Deploy_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.x',
'Deploy_miniDOT_SN-2' = 'miniDOT_SN-2.x',
'Deploy_Wiper_SN-2' = 'Wiper_SN-2.x',
'Deploy_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.x',
'Deploy_miniDOT_Location-2' = 'miniDOT_Location-2.x',
'Deploy_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.x',
'Deploy_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.x',
Deploy_Notes.x = Notes.x,
Deploy_BaroTROLL_SN.x = BaroTROLL_SN.x,
Retrieve_Date = Date.y,
Retrieve_Start_Time = Start_Time.y,
Retrieve_End_Time = End_Time.y,
Retrieve_Water_Depth_cm = Water_Depth_cm.y,
Retrieve_Field_Crew = Field_Crew.y,
'Retrieve_miniDOT_SN-1' = 'miniDOT_SN-1.y',
'Retrieve_Wiper_SN-1' = 'Wiper_SN-1.y',
'Retrieve_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.y',
'Retrieve_miniDOT_Location-1' = 'miniDOT_Location-1.y',
'Retrieve_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.y',
'Retrieve_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.y',
'Retrieve_miniDOT_SN-2' = 'miniDOT_SN-2.y',
'Retrieve_Wiper_SN-2' = 'Wiper_SN-2.y',
'Retrieve_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.y',
'Retrieve_miniDOT_Location-2' = 'miniDOT_Location-2.y',
'Retrieve_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.y',
'Retrieve_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.y',
Retrieve_Notes.y = Notes.y,
Retrieve_BaroTROLL_SN.y = BaroTROLL_SN.y,
)
all_combine <- deploy_retrieve %>%
full_join(sample, by = 'Site_ID')
rm(temp)
View(all_combine)
View(sample)
temp <- all_combine %>%
select(contains('.x')) %>% colnames()
temp
colnames(sample)
deploy_retrieve <- deploy %>%
full_join(retrieve, by = 'Site_ID') %>%
rename(
Deploy_Date = Date.x,
Deploy_Start_Time = Start_Time.x,
Deploy_End_Time = End_Time.x,
Deploy_Water_Depth_cm = Water_Depth_cm.x,
Deploy_Field_Crew = Field_Crew.x,
'Deploy_miniDOT_SN-1' = 'miniDOT_SN-1.x',
'Deploy_Wiper_SN-1' = 'Wiper_SN-1.x',
'Deploy_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.x',
'Deploy_miniDOT_Location-1' = 'miniDOT_Location-1.x',
'Deploy_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.x',
'Deploy_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.x',
'Deploy_miniDOT_SN-2' = 'miniDOT_SN-2.x',
'Deploy_Wiper_SN-2' = 'Wiper_SN-2.x',
'Deploy_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.x',
'Deploy_miniDOT_Location-2' = 'miniDOT_Location-2.x',
'Deploy_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.x',
'Deploy_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.x',
Deploy_Notes = Notes.x,
Deploy_BaroTROLL_SN = BaroTROLL_SN.x,
Retrieve_Date = Date.y,
Retrieve_Start_Time = Start_Time.y,
Retrieve_End_Time = End_Time.y,
Retrieve_Water_Depth_cm = Water_Depth_cm.y,
Retrieve_Field_Crew = Field_Crew.y,
'Retrieve_miniDOT_SN-1' = 'miniDOT_SN-1.y',
'Retrieve_Wiper_SN-1' = 'Wiper_SN-1.y',
'Retrieve_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.y',
'Retrieve_miniDOT_Location-1' = 'miniDOT_Location-1.y',
'Retrieve_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.y',
'Retrieve_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.y',
'Retrieve_miniDOT_SN-2' = 'miniDOT_SN-2.y',
'Retrieve_Wiper_SN-2' = 'Wiper_SN-2.y',
'Retrieve_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.y',
'Retrieve_miniDOT_Location-2' = 'miniDOT_Location-2.y',
'Retrieve_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.y',
'Retrieve_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.y',
Retrieve_Notes = Notes.y,
Retrieve_BaroTROLL_SN = BaroTROLL_SN.y,
)
all_combine <- deploy_retrieve %>%
full_join(sample, by = 'Site_ID')
temp <- all_combine %>%
select(contains('.x')) %>% colnames()
temp
colnames(deploy)[5]
colnames(deploy)[1:5]
colnames(sample)
all_combine <- deploy_retrieve %>%
full_join(sample, by = 'Site_ID')  %>%
rename(
Sample_Latitude = Latitude,
Sample_Longitude = Longitude,
Sample_GPS_Accuracy_ft = GPS_Accuracy_ft,
Sample_Date = Date,
Sample_Start_Time = Time_Arriving_PST,
Sample_End_Time = Time_Leaving_PST,
Sample_Field_Crew = Field_Crew,
Sample_Notes = Notes)
all_combine <- deploy_retrieve %>%
full_join(sample, by = 'Site_ID')
deploy_retrieve <- deploy %>%
full_join(retrieve, by = 'Site_ID') %>%
rename(
Deploy_Latitude = Latitude,
Deploy_Longitude = Longitude,
Deploy_GPS_Accuracy_ft = GPS_Accuracy_ft,
Deploy_Date = Date.x,
Deploy_Start_Time = Start_Time.x,
Deploy_End_Time = End_Time.x,
Deploy_Water_Depth_cm = Water_Depth_cm.x,
Deploy_Field_Crew = Field_Crew.x,
'Deploy_miniDOT_SN-1' = 'miniDOT_SN-1.x',
'Deploy_Wiper_SN-1' = 'Wiper_SN-1.x',
'Deploy_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.x',
'Deploy_miniDOT_Location-1' = 'miniDOT_Location-1.x',
'Deploy_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.x',
'Deploy_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.x',
'Deploy_miniDOT_SN-2' = 'miniDOT_SN-2.x',
'Deploy_Wiper_SN-2' = 'Wiper_SN-2.x',
'Deploy_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.x',
'Deploy_miniDOT_Location-2' = 'miniDOT_Location-2.x',
'Deploy_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.x',
'Deploy_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.x',
Deploy_Notes = Notes.x,
Deploy_BaroTROLL_SN = BaroTROLL_SN.x,
Retrieve_Date = Date.y,
Retrieve_Start_Time = Start_Time.y,
Retrieve_End_Time = End_Time.y,
Retrieve_Water_Depth_cm = Water_Depth_cm.y,
Retrieve_Field_Crew = Field_Crew.y,
'Retrieve_miniDOT_SN-1' = 'miniDOT_SN-1.y',
'Retrieve_Wiper_SN-1' = 'Wiper_SN-1.y',
'Retrieve_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.y',
'Retrieve_miniDOT_Location-1' = 'miniDOT_Location-1.y',
'Retrieve_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.y',
'Retrieve_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.y',
'Retrieve_miniDOT_SN-2' = 'miniDOT_SN-2.y',
'Retrieve_Wiper_SN-2' = 'Wiper_SN-2.y',
'Retrieve_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.y',
'Retrieve_miniDOT_Location-2' = 'miniDOT_Location-2.y',
'Retrieve_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.y',
'Retrieve_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.y',
Retrieve_Notes = Notes.y,
Retrieve_BaroTROLL_SN = BaroTROLL_SN.y,
)
all_combine <- deploy_retrieve %>%
full_join(sample, by = 'Site_ID')  %>%
rename(
Sample_Latitude = Latitude,
Sample_Longitude = Longitude,
Sample_GPS_Accuracy_ft = GPS_Accuracy_ft,
Sample_Date = Date,
Sample_Start_Time = Time_Arriving_PST,
Sample_End_Time = Time_Leaving_PST,
Sample_Field_Crew = Field_Crew,
Sample_Notes = Notes)
colnames(all_combine)
out_name <- paste0(out_dir, 'SSF_Deploy_Sample_Retrieve_Metadata_', Sys.Date(), '.csv')
out_name
write_csv(all_combine, out_name)
deploy <- construct_download_url('https://docs.google.com/spreadsheets/d/16fqH2AAtgLDd_bp4LnyaeCJk2kB9CPi1eu_iwdGS_3w/edit?usp=sharing') %>%
read_csv() %>%
select(-Site_ID...2, -Timestamp) %>%
rename(Site_ID = Site_ID...32) %>%
relocate(Site_ID, .before = everything())
sample <- construct_download_url('https://docs.google.com/spreadsheets/d/1YwG2B7qgLRrYiNmTq8L86iEiVurGw84tP_1wPGeKOys/edit?usp=sharingg') %>%
read_csv() %>%
select(-Time_Zone, -Timestamp)
retrieve <- construct_download_url('https://docs.google.com/spreadsheets/d/1rf7jd7uPALQskk94zujdPZGtmJtRTVh9P3eHu37sl5c/edit?usp=sharing') %>%
read_csv() %>%
filter(!str_detect(Timestamp, '8/3')) %>%
select(-Time_Zone, -Timestamp)
out_dir <- 'Z:/RC3/00_Schneider_Springs_Fire_2023/00_Metadata/'
# ================================== combine  ==================================
deploy_retrieve <- deploy %>%
full_join(retrieve, by = 'Site_ID') %>%
rename(
Deploy_Latitude = Latitude,
Deploy_Longitude = Longitude,
Deploy_GPS_Accuracy_ft = GPS_Accuracy_ft,
Deploy_Date = Date.x,
Deploy_Start_Time = Start_Time.x,
Deploy_End_Time = End_Time.x,
Deploy_Water_Depth_cm = Water_Depth_cm.x,
Deploy_Field_Crew = Field_Crew.x,
'Deploy_miniDOT_SN-1' = 'miniDOT_SN-1.x',
'Deploy_Wiper_SN-1' = 'Wiper_SN-1.x',
'Deploy_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.x',
'Deploy_miniDOT_Location-1' = 'miniDOT_Location-1.x',
'Deploy_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.x',
'Deploy_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.x',
'Deploy_miniDOT_SN-2' = 'miniDOT_SN-2.x',
'Deploy_Wiper_SN-2' = 'Wiper_SN-2.x',
'Deploy_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.x',
'Deploy_miniDOT_Location-2' = 'miniDOT_Location-2.x',
'Deploy_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.x',
'Deploy_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.x',
Deploy_Notes = Notes.x,
Deploy_BaroTROLL_SN = BaroTROLL_SN.x,
Retrieve_Date = Date.y,
Retrieve_Start_Time = Start_Time.y,
Retrieve_End_Time = End_Time.y,
Retrieve_Water_Depth_cm = Water_Depth_cm.y,
Retrieve_Field_Crew = Field_Crew.y,
'Retrieve_miniDOT_SN-1' = 'miniDOT_SN-1.y',
'Retrieve_Wiper_SN-1' = 'Wiper_SN-1.y',
'Retrieve_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.y',
'Retrieve_miniDOT_Location-1' = 'miniDOT_Location-1.y',
'Retrieve_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.y',
'Retrieve_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.y',
'Retrieve_miniDOT_SN-2' = 'miniDOT_SN-2.y',
'Retrieve_Wiper_SN-2' = 'Wiper_SN-2.y',
'Retrieve_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.y',
'Retrieve_miniDOT_Location-2' = 'miniDOT_Location-2.y',
'Retrieve_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.y',
'Retrieve_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.y',
Retrieve_Notes = Notes.y,
Retrieve_BaroTROLL_SN = BaroTROLL_SN.y,
)
all_combine <- deploy_retrieve %>%
full_join(sample, by = 'Site_ID')  %>%
rename(
Sample_Latitude = Latitude,
Sample_Longitude = Longitude,
Sample_GPS_Accuracy_ft = GPS_Accuracy_ft,
Sample_Date = Date,
Sample_Start_Time = Time_Arriving_PST,
Sample_End_Time = Time_Leaving_PST,
Sample_Field_Crew = Field_Crew,
Sample_Notes = Notes)
out_name <- paste0(out_dir, 'SSF_Deploy_Sample_Retrieve_Metadata_', Sys.Date(), '.csv')
write_csv(all_combine, out_name)
write_csv(all_combine, out_name)
temp <- all_combine <- select(contains('Orange')) %>% colnames()
temp <- all_combine %>% select(contains('Orange')) %>% colnames()
paste0(temp, collapse = ', ')
deploy <- construct_download_url('https://docs.google.com/spreadsheets/d/16fqH2AAtgLDd_bp4LnyaeCJk2kB9CPi1eu_iwdGS_3w/edit?usp=sharing') %>%
read_csv() %>%
select(-Site_ID...2, -Timestamp) %>%
rename(Site_ID = Site_ID...32) %>%
relocate(Site_ID, .before = everything())
sample <- construct_download_url('https://docs.google.com/spreadsheets/d/1YwG2B7qgLRrYiNmTq8L86iEiVurGw84tP_1wPGeKOys/edit?usp=sharingg') %>%
read_csv() %>%
select(-Time_Zone, -Timestamp)
retrieve <- construct_download_url('https://docs.google.com/spreadsheets/d/1rf7jd7uPALQskk94zujdPZGtmJtRTVh9P3eHu37sl5c/edit?usp=sharing') %>%
read_csv() %>%
filter(!str_detect(Timestamp, '8/3')) %>%
select(-Time_Zone, -Timestamp, -contains('Velocity'))
out_dir <- 'Z:/RC3/00_Schneider_Springs_Fire_2023/00_Metadata/'
deploy_retrieve <- deploy %>%
full_join(retrieve, by = 'Site_ID') %>%
rename(
Deploy_Latitude = Latitude,
Deploy_Longitude = Longitude,
Deploy_GPS_Accuracy_ft = GPS_Accuracy_ft,
Deploy_Date = Date.x,
Deploy_Start_Time = Start_Time.x,
Deploy_End_Time = End_Time.x,
Deploy_Water_Depth_cm = Water_Depth_cm.x,
Deploy_Field_Crew = Field_Crew.x,
'Deploy_miniDOT_SN-1' = 'miniDOT_SN-1.x',
'Deploy_Wiper_SN-1' = 'Wiper_SN-1.x',
'Deploy_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.x',
'Deploy_miniDOT_Location-1' = 'miniDOT_Location-1.x',
'Deploy_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.x',
'Deploy_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.x',
'Deploy_miniDOT_SN-2' = 'miniDOT_SN-2.x',
'Deploy_Wiper_SN-2' = 'Wiper_SN-2.x',
'Deploy_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.x',
'Deploy_miniDOT_Location-2' = 'miniDOT_Location-2.x',
'Deploy_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.x',
'Deploy_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.x',
'Deploy_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.x',
Deploy_Notes = Notes.x,
Deploy_BaroTROLL_SN = BaroTROLL_SN.x,
Retrieve_Date = Date.y,
Retrieve_Start_Time = Start_Time.y,
Retrieve_End_Time = End_Time.y,
Retrieve_Water_Depth_cm = Water_Depth_cm.y,
Retrieve_Field_Crew = Field_Crew.y,
'Retrieve_miniDOT_SN-1' = 'miniDOT_SN-1.y',
'Retrieve_Wiper_SN-1' = 'Wiper_SN-1.y',
'Retrieve_miniDOT_Riverbed_Distance_cm' = 'miniDOT_Riverbed_Distance_cm-1.y',
'Retrieve_miniDOT_Location-1' = 'miniDOT_Location-1.y',
'Retrieve_Depth_Hobo_SN-1' = 'Depth_Hobo_SN-1.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-1' = 'Depth_Hobo_Riverbed_Distance_cm-1.y',
'Retrieve_Depth_Hobo_Location-1' = 'Depth_Hobo_Location-1.y',
'Retrieve_miniDOT_SN-2' = 'miniDOT_SN-2.y',
'Retrieve_Wiper_SN-2' = 'Wiper_SN-2.y',
'Retrieve_miniDOT_Riverbed_Distance_cm-2' = 'miniDOT_Riverbed_Distance_cm-2.y',
'Retrieve_miniDOT_Location-2' = 'miniDOT_Location-2.y',
'Retrieve_Depth_Hobo_SN-2' = 'Depth_Hobo_SN-2.y',
'Retrieve_Depth_Hobo_Riverbed_Distance_cm-2' = 'Depth_Hobo_Riverbed_Distance_cm-2.y',
'Retrieve_Depth_Hobo_Location-2' = 'Depth_Hobo_Location-2.y',
Retrieve_Notes = Notes.y,
Retrieve_BaroTROLL_SN = BaroTROLL_SN.y,
)
all_combine <- deploy_retrieve %>%
full_join(sample, by = 'Site_ID')  %>%
rename(
Sample_Latitude = Latitude,
Sample_Longitude = Longitude,
Sample_GPS_Accuracy_ft = GPS_Accuracy_ft,
Sample_Date = Date,
Sample_Start_Time = Time_Arriving_PST,
Sample_End_Time = Time_Leaving_PST,
Sample_Field_Crew = Field_Crew,
Sample_Notes = Notes,
Deploy_River_Width_m = River_Width_m,
Retrieve_River_Width_At_Sensor_Rangefinder_m = River_Width_At_Sensor_Rangefinder_m,
Retrieve_River_Width_At_Sensor_Manual_m = River_Width_At_Sensor_Manual_m,
Retrieve_River_Width_At_Flags_m = River_Width_At_Flags_m,
Retrieve_Sensors_Underwater = Sensors_Underwater,
Retrieve_Depth_Transect_Number_At_Sensors = Depth_Transect_Number_At_Sensors,
Retrieve_Swoffer_Transect_Number_At_Sensors = Swoffer_Transect_Number_At_Sensors,
Retrieve_Slope_Between_Water_And_Flag = Slope_Between_Water_And_Flag,
Retrieve_Slope_Notes = Slope_Notes,
Retrieve_Water_Depth_At_Swoffer_ft = Water_Depth_At_Swoffer_ft,
Retrieve_Orange_Distance_m = Orange_Distance_m,
Retrieve_Orange_One_Total_Time_sec = Orange_One_Total_Time_sec,
Retrieve_Orange_Two_Total_Time_sec = Orange_Two_Total_Time_sec,
Retrieve_Orange_Three_Total_Time_sec = Orange_Three_Total_Time_sec,
Retrieve_Orange_Four_Total_Time_sec = Orange_Four_Total_Time_sec,
Retrieve_Orange_Five_Total_Time_sec = Orange_Five_Total_Time_sec,
Retrieve_Orange_Six_Total_Time_sec = Orange_Six_Total_Time_sec,
Retrieve_Orange_Seven_Total_Time_sec = Orange_Seven_Total_Time_sec,
Retrieve_Orange_Eight_Total_Time_sec = Orange_Eight_Total_Time_sec,
Sample_Orange_Distance_m = Oranges_Distance_m,
Sample_Orange_One_Total_Time_sec = 'Orange_Total_Time_sec-1',
Sample_Orange_Two_Total_Time_sec = 'Orange_Total_Time_sec-2',
Sample_Orange_Three_Total_Time_sec = 'Orange_Total_Time_sec-3',
Sample_Orange_Four_Total_Time_sec = 'Orange_Total_Time_sec-4',
Sample_Orange_Five_Total_Time_sec = 'Orange_Total_Time_sec-5',
Sample_Orange_Six_Total_Time_sec = 'Orange_Total_Time_sec-6',
Sample_Orange_Seven_Total_Time_sec = 'Orange_Total_Time_sec-7',
Sample_Orange_Eight_Total_Time_sec = 'Orange_Total_Time_sec-8'
)
out_name <- paste0(out_dir, 'SSF_Deploy_Sample_Retrieve_Metadata_', Sys.Date(), '.csv')
write_csv(all_combine, out_name)
# Pull nhd flow lines and export as shp file
#
# Status:
#
# ==============================================================================
#
# Author: Brieanne Forbes
# 18 August 2023
#
# ==============================================================================
library(tidyverse)
library(nhdplusTools)
library(sf)
YRB_dir <- 'C:/Brieanne/Maps/Yakima_River_Basin'
CRB_dir <- 'C:/Brieanne/Maps/Columbia_Basin_Watershed_Boundary'
common_crs = 4326
YRB_dir <- 'C:/Brieanne/Maps/Yakima_River_Basin'
CRB_dir <- 'C:/Brieanne/Maps/Columbia_Basin_Watershed_Boundary'
common_crs = 4326
YRB_shp <- list.files(YRB_dir, 'shp', full.names = T)
YRB_boundary <- read_sf(YRB_shp) %>%
st_transform(common_crs)
CRB_shp <- list.files(CRB_dir, 'shp', full.names = T)
CRB_boundary <- read_sf(CRB_shp) %>%
st_transform(common_crs)
YRB_flowlines <- get_nhdplus(AOI = YRB_boundary$geometry, streamorder = 3)
CRB_flowlines <- get_nhdplus(AOI = CRB_boundary$geometry, streamorder = 3)
CRB_shp
CRB_boundary <- read_sf(CRB_shp)
CRB_boundary <- read_sf(CRB_shp
CRB_flowlines <- get_nhdplus(AOI = CRB_boundary$geometry, streamorder = 3)
CRB_boundary <- read_sf(CRB_shp)
CRB_flowlines <- get_nhdplus(AOI = CRB_boundary$geometry, streamorder = 3)
common_crs
CRB_boundary
YRB_boundary
CRB_boundary$geometry
YRB_boundary$geometry
CRB_shp <- list.files(CRB_dir, 'shp', full.names = T)
CRB_boundary <- read_sf(CRB_shp) %>%
st_transform(common_crs)
CRB_flowlines <- get_nhdplus(AOI = CRB_boundary$geometry, streamorder = 3)
CRB_boundary <- read_sf(CRB_shp
CRB_boundary
CRB_boundary <- read_sf(CRB_shp)
CRB_boundary
st_write(YRB_flowlines, 'C:/Brieanne/Maps/Yakima_River_Basin_Flowlines/Yakima_River_Basin_Flowlines.shp')
st_write(YRB_flowlines, 'C:/Brieanne/Maps/Yakima_River_Basin_Flowlines/Yakima_River_Basin_Flowlines.shp')
ibrary(tidyverse)
library(nhdplusTools)
library(sf)
CRB_dir <- 'C:/Brieanne/Maps/Columbia_Basin_Watershed_Boundary'
common_crs = 4326
CRB_shp <- list.files(CRB_dir, 'shp', full.names = T)
CRB_boundary <- read_sf(CRB_shp) %>%
st_transform(common_crs)
CRB_flowlines <- get_nhdplus(AOI = CRB_boundary$geometry, streamorder = 3)
CRB_boundary <- read_sf(CRB_shp) %>%
st_transform(common_crs)
CRB_flowlines <- get_nhdplus(AOI = CRB_boundary$geometry, streamorder = 3, t_srs = common_crs)
get_nhdplus
current_path <- rstudioapi::getActiveDocumentContext()$path
setwd(dirname(current_path))
setwd("./..")
# ================================= User inputs ================================
metadata_file <- './v2_RCSFA_Geospatial_Data_Package/v2_RCSFA_Geospatial_Site_Information.csv'
data_file <- './SSS_Ecosystem_Respiration_Data_Package/SSS_Water_Sediment_Total_Respiration.csv'
shp_dir <- './Maps/YakimaRiverBasin_Boundary'
ER <- './SSS_Ecosystem_Respiration_Data_Package/SSS_Water_Sediment_Total_Respiration.csv'
modelled_ER <- './SSS_Ecosystem_Respiration_Data_Package/SSS_ER_d50_TotalOxygenConsumed.csv'
common_crs = 4326
# ============================== read in and merge =============================
metadata <- read_csv(metadata_file) %>%
dplyr::select(Site_ID, Latitude, Longitude)
data <- read_csv(data_file, skip = 8)
merge <- data %>%
left_join(metadata)
sites <- st_as_sf(merge, coords = c('Longitude','Latitude'), crs = common_crs)
st_write(sites, 'C:/Brieanne/Maps/SSS_Sites/SSS_Sites.shp')
